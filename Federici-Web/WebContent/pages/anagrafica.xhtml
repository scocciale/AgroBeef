<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui" template="/templates/layout.xhtml"
	xmlns:c="http://java.sun.com/jsp/jstl/core">


	<ui:define name="title">
		<h:outputText value="Anagrafica" />
	</ui:define>
	<ui:define name="title-desc">
		<h:outputText value="" />
	</ui:define>
	<ui:define name="content">
		<p:panel header="Anagrafica" closable="false" toggleable="false"
			widgetVar="resultPanelWdg"
			style="margin-left: 10px ; margin-right: 10px">
			<div class="row">
				<p:commandButton value="Aggiungi" style="float:right!important;"
					rendered="#{!userMB.utente.profilo.proNome.equals('lettura')}"
					id="addAnag" action="#{anagMB.showDialogAnag}"
					styleClass="width-100 waves-effect waves-light btn rosso_cdr"
					update="dialogAnag" />
				<p:tooltip for="addAnag" value="Aggiungere nuovo animale"
					position="top" />
			</div>
			<p:dialog resizable="false" widgetVar="dlgNuovoAnag" width="60%"
				id="dialogAnag" closable="true" styleClass="dialogClass"
				style="box-shadow: 0px 1px 7px 0px rgba(0, 0, 0, 0.7) !important;">

				<div class="row center">
					<h:outputText value="Dettagli animale" styleClass="text-al-cen"
						style="font-weight: bold !important; font-size:1.5em" />
				</div>
				<div class="row">
					<p:panelGrid id="gridDettagliAnag" styleClass="companyHeaderGrid">
						<p:row>
							<p:column colspan="1">
								<div class="input-field row">
									<p:inputText id="matricola" styleClass="validate"
										value="#{anagMB.nuovoAnimale.anaNumMatricola}"></p:inputText>
									<label class="left-align" for="matricola"><h:outputText
											value="Matricola *" /></label>
								</div>
							</p:column>
							<p:column colspan="1">
							</p:column>
							<p:column colspan="1">
								<div class="row">
									<p:outputLabel value="Sesso *: " for="sesso">
										<p:selectOneRadio id="sesso"
											value="#{anagMB.nuovoAnimale.anaSesso}" style="width: 40px;">
											<f:selectItem itemLabel="F" itemValue="F" />
											<f:selectItem itemLabel="M" itemValue="M" />
										</p:selectOneRadio>
									</p:outputLabel>

								</div>
							</p:column>
						</p:row>
						<p:row>
							<p:column>
								<div class="input-field">
									<p:inputText id="matMadre" styleClass="validate"
										onkeypress="if (event.keyCode == 13) return false;"
										value="#{anagMB.nuovoAnimale.anaNumMatricolaMadre}">
										<p:ajax listener="#{anagMB.checkRazza}" update="razza" />
									</p:inputText>
									<label class="left-align" for="matMadre"><h:outputText
											value="Matricola Madre" /></label>
								</div>
							</p:column>

							<p:column>
								<div class="input-field">
									<p:inputText id="matPadre" styleClass="validate"
										onkeypress="if (event.keyCode == 13) return false;"
										value="#{anagMB.nuovoAnimale.anaNumMatricolaPadre}">
										<p:ajax listener="#{anagMB.checkRazza}" update="razza" />
									</p:inputText>
									<label class="left-align" for="matPadre"><h:outputText
											value="Matricola Padre" /></label>
								</div>
							</p:column>

							<p:column colspan="1">
								<div class="row" style="">
									<p:outputLabel value="Toro" style="margin-left: 20px;"
										for="flagToro" />
									<p:selectBooleanCheckbox value="#{anagMB.flagToro}"
										style="margin-left: 20px;" id="flagToro" />
								</div>
							</p:column>
						</p:row>
						<p:row>
							<p:column colspan="1">
								<div class="input-field">
									<p:outputLabel for="dataNasc" value="Data di nascita"
										styleClass="left-align"
										style="font-size: 0.9rem !important;color: #888888;!important" />
									<p:calendar id="dataNasc"
										value="#{anagMB.nuovoAnimale.anaDataNascita}" locale="it"
										navigator="true" styleClass="validate">
										<f:convertDateTime pattern="dd/MM/yyyy" />
									</p:calendar>
								</div>
							</p:column>

							<p:column colspan="1">
								<div class="input-field">
									<p:outputLabel for="dataAcq" value="Data di acquisto"
										styleClass="left-align"
										style="font-size: 0.9rem !important;color: #888888;!important" />
									<p:calendar id="dataAcq"
										value="#{anagMB.nuovoAnimale.anaDataAcquisto}" locale="it"
										navigator="true" styleClass="validate">
										<f:convertDateTime pattern="dd/MM/yyyy" />
									</p:calendar>
								</div>
							</p:column>

							<p:column colspan="1">
							</p:column>
						</p:row>
						<p:row>
							<p:column colspan="1">
								<div class="input-field">
									<label class="left-align" for="razza"><h:outputText
											value="Razza" /></label>

									<p:selectOneMenu id="razza" widgetVar="razzaNuovoAnimale"
										value="#{anagMB.nuovoAnimale.anaRazza}"
										style="width:125px;display: block!important;margin-left: auto !important;margin-right: auto !important;">
										<f:selectItem itemLabel="Seleziona la razza" itemValue="" />
										<f:selectItems value="#{anagMB.razzeString}" />
										<!-- <f:selectItem itemValue="MTT" itemLabel="MTT" />
										<f:selectItem itemValue="MLS" itemLabel="MLS" />
										<f:selectItem itemValue="MCG" itemLabel="MCG" /> -->
									</p:selectOneMenu>
								</div>
							</p:column>

							<p:column colspan="1">
								<div class="input-field">
									<p:inputText id="nParto" styleClass="validate"
										onkeypress="if (event.keyCode == 13) return false;"
										value="#{anagMB.nuovoAnimale.anaNumParto}">
									</p:inputText>
									<label class="left-align" for="nParto"><h:outputText
											value="Numero parto" /></label>
								</div>
							</p:column>
							<p:column colspan="1">
								<div class="row" style="">
									<p:outputLabel value="Gemello" style="margin-left: 20px;"
										for="flagGemello" />
									<p:selectBooleanCheckbox value="#{anagMB.flagGemello}"
										style="margin-left: 20px;" id="flagGemello" />
								</div>
							</p:column>
						</p:row>
						<p:row>
							<p:column colspan="1">
								<div class="input-field">
									<p:inputText id="diffParto" styleClass="validate"
										value="#{anagMB.nuovoAnimale.anaDifficoltaParto}"
										onkeypress="if (event.keyCode == 13) return false;">
									</p:inputText>
									<label class="left-align" for="diffParto"><h:outputText
											value="Difficoltà parto" /></label>
								</div>
							</p:column>

						</p:row>
					</p:panelGrid>
				</div>
				<div class="row">
					<p:commandButton id="salvaAnag" value="Salva"
						actionListener="#{anagMB.salvaDatiAnag}"
						styleClass="width-100 waves-effect waves-light btn rosso_cdr "
						style="width:auto; float:right;"
						oncomplete="PF('dlgNuovoAnag').hide();location.reload();"
						update="anagrafica messages" />
					<p:tooltip for="salvaAnag" value="Salva tutti i dati"
						position="top" />
				</div>
			</p:dialog>

			<p:dialog resizable="false" widgetVar="dlgNuovoAnagMod" width="60%"
				id="dialogAnagMod" closable="true" styleClass="dialogClass"
				style="box-shadow: 0px 1px 7px 0px rgba(0, 0, 0, 0.7) !important;">

				<div class="row center">
					<h:outputText
						value="Dettagli animale #{anagMB.animaleEdit.anaNumMatricola}"
						styleClass="text-al-cen"
						style="font-weight: bold !important; font-size:1.5em" />
				</div>
				<div class="row">
					<p:panelGrid id="gridDettagliAnagMod"
						styleClass="companyHeaderGrid">
						<p:row>
							<p:column colspan="1">
								<div class="input-field row">
									<!-- <h:outputText for="matricolaMod" value="Matricola"
										styleClass="left-align"
										style="font-size: 0.9rem !important;color: #888888;padding-bottom:3%!important;" />
									<h:outputText id="matricolaMod" styleClass="validate"
										value="#{anagMB.animaleEdit.anaNumMatricola}"></h:outputText> -->

									<p:inputText id="matricolaMod" styleClass="validate"
										onkeypress="if (event.keyCode == 13) return false;"
										value="#{anagMB.animaleEdit.anaNumMatricola}">
									</p:inputText>
									<label class="left-align" for="matricolaMod"><h:outputText
											value="Matricola" /></label>

								</div>
							</p:column>
							<p:column colspan="1">
							</p:column>
							<p:column colspan="1">
								<div class="row">
									<p:outputLabel value="Sesso: " for="sessoMod">
										<p:selectOneRadio id="sessoMod" value="#{anagMB.sesso}"
											style="width: 40px;">
											<f:selectItem itemLabel="F" itemValue="F" />
											<f:selectItem itemLabel="M" itemValue="M" />
										</p:selectOneRadio>
									</p:outputLabel>

								</div>
							</p:column>
						</p:row>
						<p:row>
							<p:column>
								<div class="input-field">
									<p:inputText id="matMadreMod" styleClass="validate"
										onkeypress="if (event.keyCode == 13) return false;"
										value="#{anagMB.animaleEdit.anaNumMatricolaMadre}">
										<p:ajax listener="#{anagMB.checkRazza}" update="razza" />
									</p:inputText>
									<label class="left-align" for="matMadreMod"><h:outputText
											value="Matricola Madre" /></label>
								</div>
							</p:column>

							<p:column>
								<div class="input-field">
									<p:inputText id="matPadreMod" styleClass="validate"
										onkeypress="if (event.keyCode == 13) return false;"
										value="#{anagMB.animaleEdit.anaNumMatricolaPadre}">
										<p:ajax listener="#{anagMB.checkRazza}" update="razza" />
									</p:inputText>
									<label class="left-align" for="matPadreMod"><h:outputText
											value="Matricola Padre" /></label>
								</div>
							</p:column>

							<p:column colspan="1">
								<div class="row" style="">
									<p:outputLabel value="Toro" style="margin-left: 20px;"
										for="flagToroMod" />
									<p:selectBooleanCheckbox value="#{anagMB.flagToro}"
										style="margin-left: 20px;" id="flagToroMod" />
								</div>
							</p:column>
						</p:row>
						<p:row>
							<p:column colspan="1">
								<div class="input-field">
									<p:outputLabel for="dataNascMod" value="Data di nascita"
										styleClass="left-align"
										style="font-size: 0.9rem !important;color: #888888;!important" />
									<p:calendar id="dataNascMod"
										value="#{anagMB.animaleEdit.anaDataNascita}" locale="it"
										navigator="true" styleClass="validate">
										<f:convertDateTime pattern="dd/MM/yyyy" />
									</p:calendar>
								</div>
							</p:column>

							<p:column colspan="1">
								<div class="input-field">
									<p:outputLabel for="dataAcqMod" value="Data di acquisto"
										styleClass="left-align"
										style="font-size: 0.9rem !important;color: #888888;!important" />
									<p:calendar id="dataAcqMod"
										value="#{anagMB.animaleEdit.anaDataAcquisto}" locale="it"
										navigator="true" styleClass="validate">
										<f:convertDateTime pattern="dd/MM/yyyy" />
									</p:calendar>
								</div>
							</p:column>

							<p:column colspan="1">
							</p:column>
						</p:row>
						<p:row>
							<p:column colspan="1">
								<div class="input-field">

									<label class="left-align" for="razzaMod"><h:outputText
											value="Razza" /></label>

									<p:selectOneMenu id="razzaMod" widgetVar="razzaAnimaleEditing"
										value="#{anagMB.animaleEdit.anaRazza}"
										style="width:125px;display: block!important;margin-left: auto !important;margin-right: auto !important;">
										<f:selectItem itemLabel="Seleziona la razza" itemValue="" />
										<f:selectItems value="#{anagMB.razzeString}" />
										<!--<f:selectItem itemValue="MTT" itemLabel="MTT" /> 
										<f:selectItem itemValue="MLS" itemLabel="MLS" />
										<f:selectItem itemValue="MCG" itemLabel="MCG" /> -->
									</p:selectOneMenu>
								</div>
							</p:column>

							<p:column colspan="1">
								<div class="input-field">
									<p:inputText id="nPartoMod" styleClass="validate"
										onkeypress="if (event.keyCode == 13) return false;"
										value="#{anagMB.animaleEdit.anaNumParto}">
									</p:inputText>
									<label class="left-align" for="nPartoMod"><h:outputText
											value="Numero parto" /></label>
								</div>
							</p:column>
							<p:column colspan="1">
								<div class="row" style="">
									<p:outputLabel value="Gemello" style="margin-left: 20px;"
										for="flagGemelloMod" />
									<p:selectBooleanCheckbox value="#{anagMB.flagGemello}"
										style="margin-left: 20px;" id="flagGemelloMod" />
								</div>
							</p:column>
						</p:row>
						<p:row>
							<p:column colspan="1">
								<div class="input-field">
									<p:inputText id="diffPartoMod" styleClass="validate"
										value="#{anagMB.animaleEdit.anaDifficoltaParto}"
										onkeypress="if (event.keyCode == 13) return false;">
									</p:inputText>
									<label class="left-align" for="diffPartoMod"><h:outputText
											value="Difficoltà parto" /></label>
								</div>
							</p:column>
							<p:column colspan="1">
								<div class="input-field">
									<p:outputLabel for="dataUscita" value="Data di uscita"
										styleClass="left-align"
										style="font-size: 0.9rem !important;color: #888888;!important" />
									<p:calendar id="dataUscita"
										value="#{anagMB.animaleEdit.anaDataUscita}" locale="it"
										navigator="true" styleClass="validate">
										<f:convertDateTime pattern="dd/MM/yyyy" />
									</p:calendar>
								</div>
							</p:column>

							<p:column colspan="1">
								<div class="input-field">
									<p:selectOneMenu id="causaUscita"
										value="#{anagMB.animaleEdit.anaUscitaCausa}"
										style="width:125px">
										<f:selectItem itemLabel="Causa uscita" itemValue="" />
										<f:selectItem itemLabel="Morte" itemValue="Morte" />
										<f:selectItem itemLabel="Macellazione"
											itemValue="Macellazione" />
										<f:selectItem itemLabel="Vita" itemValue="Vita" />
									</p:selectOneMenu>
								</div>
							</p:column>
						</p:row>
					</p:panelGrid>
				</div>
				<div class="row">
					<p:commandButton id="salvaAnagMod" value="Salva"
						actionListener="#{anagMB.updateDatiAnag()}"
						styleClass="width-100 waves-effect waves-light btn rosso_cdr"
						style="width:auto; float:right;"
						oncomplete="PF('dlgNuovoAnagMod').hide();"
						update="anagrafica messages" />
					<p:tooltip for="salvaAnag" value="Salva tutti i dati"
						position="top" />
				</div>
			</p:dialog>

			<div class="row">
				<div class="ui-g">
					<div class="ui-g-12">
						<!-- anagraficaList -->

						<p:dataTable id="anagrafica" var="ana" widgetVar="templateWdg"
							emptyMessage="#{text['label.emptyResult']}"
							value="#{anagMB.lazyModel}" paginatorPosition="bottom"
							filteredValue="#{anagMB.anagraficaFilteredList}"
							currentPageReportTemplate="({currentPage} Di {totalPages})"
							rows="10" paginator="true" dynamic="true" lazy="true"
							paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
							rowsPerPageTemplate="5,10,15">

							<p:column headerText="Numero matricola"
								filterStyleClass="filterClass" width="10%"
								filterBy="#{ana.anaNumMatricola}" filterMatchMode="contains"
								style="text-align: center; font-size:1.3em;"
								sortBy="#{ana.anaNumMatricola}">
								<h:outputText value="#{ana.anaNumMatricola}" />
							</p:column>
							<p:column headerText="Matricola Madre"
								filterStyleClass="filterClass" width="10%"
								filterMatchMode="contains"
								filterBy="#{ana.anaNumMatricolaMadre}"
								style="text-align: center; font-size:1.3em;"
								sortBy="#{ana.anaNumMatricolaMadre}">
								<h:outputText value="#{ana.anaNumMatricolaMadre}" />
							</p:column>
							<p:column headerText="Matricola Padre" filterMatchMode="contains"
								style="text-align: center; font-size:1.3em;"
								filterStyleClass="filterClass" width="10%"
								filterBy="#{ana.anaNumMatricolaPadre}"
								sortBy="#{ana.anaNumMatricolaPadre}">
								<h:outputText value="#{ana.anaNumMatricolaPadre}" />
							</p:column>
							<p:column headerText="Sesso" filterStyleClass="filterClass"
								width="4%" filterBy="#{ana.anaSesso}" filterMatchMode="contains"
								style="text-align: center; font-size:1.3em;"
								sortBy="#{ana.anaSesso}">
								<h:outputText value="#{ana.anaSesso}" />
							</p:column>
							<p:column headerText="Toro" filterStyleClass="filterClass"
								width="4%" filterBy="#{ana.anaFlagToro}"
								filterMatchMode="contains"
								style="text-align: center; font-size:1.3em;"
								sortBy="#{ana.anaFlagToro}">
								<h:outputText rendered="#{ana.anaFlagToro eq 1}"
									styleClass="fa fa-check" />
							</p:column>
							<p:column headerText="Data di nascita" width="12%"
								filterMatchMode="contains" filterStyleClass="filterClass"
								filterBy="#{ana.anaDataNascita}"
								style="text-align: center; font-size:1.3em;"
								sortBy="#{ana.anaDataNascita}">
								<h:outputText value="#{ana.anaDataNascita}">
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</h:outputText>
							</p:column>
							<p:column headerText="Data acquisto"
								style="text-align: center; font-size:1.3em;" width="12%"
								sortBy="#{ana.anaDataAcquisto}">
								<h:outputText value="#{ana.anaDataAcquisto}">
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</h:outputText>
							</p:column>
							<p:column headerText="Razza"
								style="text-align: center; font-size:1.3em;" width="10%"
								sortBy="#{ana.anaRazza}">
								<h:outputText value="#{ana.anaRazza}" />
							</p:column>
							<p:column headerText="Difficoltà parto" width="4%"
								style="text-align: center; font-size:1.3em;"
								sortBy="#{ana.anaDifficoltaParto}">
								<h:outputText value="#{ana.anaDifficoltaParto}" />
							</p:column>
							<p:column headerText="Causa uscita" width="6%"
								style="text-align: center; font-size:1.3em;"
								sortBy="#{ana.anaUscitaCausa}">
								<h:outputText value="#{ana.anaUscitaCausa}" />
							</p:column>
							<p:column width="4%" style="text-align: center; font-size:1.3em;">
								<p:commandLink action="#{anagMB.editAnimale(ana)}"
									rendered="#{!anagMB.valEsistenti.contains(ana.anaNumMatricola) and !userMB.utente.profilo.proNome.equals('lettura')}"
									oncomplete="PF('dlgNuovoAnagMod').loadContents();">
									<p:graphicImage name="images/icons/editing-edit-icon.png"
										style="height: 23px; width: 23px;" />
								</p:commandLink>
							</p:column>
						</p:dataTable>
					</div>
				</div>
			</div>
		</p:panel>
	</ui:define>
</ui:composition>